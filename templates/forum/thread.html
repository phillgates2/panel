{% extends "base.html" %}
{% block content %}
<h1>{{ thread.title }}</h1>
<ul>
  {% for p in posts %}
    <li>
      <strong>{{ p.author }}</strong>:
      {% if p._html is defined %}
        <div class="post-content">{{ p._html|safe }}</div>
      {% else %}
        <div class="post-content">{{ p.content }}</div>
      {% endif %}
      <em>({{ p.created_at }})</em>
      {% if session.admin_authenticated %}
        <a href="{{ url_for('forum.edit_post', post_id=p.id) }}">Edit</a>
        <form method="post" action="{{ url_for('forum.delete_post', post_id=p.id) }}" style="display:inline">
          <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
          <button type="submit">Delete</button>
        </form>
      {% endif %}
    </li>
  {% else %}
    <li>No posts in this thread.</li>
  {% endfor %}
</ul>
<p><a href="{{ url_for('forum.index') }}">Back to forum</a></p>

<h2>Reply</h2>
<form method="post" action="{{ url_for('forum.reply_thread', thread_id=thread.id) }}">
  <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
  <label>Author: <input name="author"></label><br>
  <label>Content:<br>
    <textarea name="content" rows="5" cols="60"></textarea>
  </label><br>
  <button type="submit">Reply</button>
</form>
{% endblock %}
